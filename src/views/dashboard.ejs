<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard | Apple Music Now Playing</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <div class="container">
    <header>
      <div style="display: flex; align-items: center; gap: 1.5rem;">
        <h1>Now Playing</h1>
        <% if(user.profileImage) { %>
          <img src="<%= user.profileImage %>" alt="Profile" style="width: 48px; height: 48px; border-radius: 50%; border: 1px solid rgba(255, 255, 255, 0.1);">
        <% } %>
      </div>
      <a href="/auth/logout" class="btn btn-secondary">Sign Out</a>
    </header>
    
    <div class="now-playing-container">
      <div id="now-playing">
        <div class="loading">Loading your music...</div>
      </div>
      
      <div id="lyrics-container" class="lyrics-container" style="display: block;">
        <h3>Lyrics</h3>
        <div id="lyrics-display" style="display: block;">
          <div class="lyrics-loading">Waiting for music to play...</div>
        </div>
        <div id="lyrics-controls">
          <button id="toggle-lyrics" class="btn btn-primary">Show Lyrics</button>
          <button id="sync-lyrics" class="btn btn-secondary" style="display: none;">Sync with Track</button>
          <a href="/fullscreen" class="btn btn-success" style="margin-left: 10px;">Fullscreen Lyrics</a>
        </div>
      </div>
    </div>
    
    <div class="api-info">
      <h3>API Usage</h3>
      <p>You can access your currently playing track via API:</p>
      
      <pre>
GET /api/now-playing
GET /api/now-playing-with-lyrics
GET /api/lyrics?artist=Artist&track=Track
      </pre>
      
      <p><strong>Note:</strong> API endpoints require authentication via session.</p>
    </div>
  </div>
  
  <script src="/js/main.js"></script>
</body>
</html>